{"version":3,"sources":["components/Header.jsx","components/Geo.jsx","components/Nav.jsx","App.jsx","index.jsx"],"names":["useStyles","makeStyles","title","flexGrow","Header","appName","styles","AppBar","position","Toolbar","Typography","variant","className","map","height","width","Geo","coords","zoom","onCreated","featureOpened","BaseLayer","LayersControl","Overlay","Map","center","key","hash","checked","name","TileLayer","url","attribution","tokens","mapbox","GeoJSON","data","countries","onEachFeature","feature","layer","bindPopup","properties","color","densities","valueProperty","density","steps","scale","mode","style","weight","fillOpacity","FeatureGroup","JSON","parse","Nav","onOpen","onSave","List","component","ListItem","button","onClick","ListItemIcon","FolderOpen","ListItemText","primary","Save","App","props","state","featureDrawn","bind","input","document","createElement","type","click","onchange","e","file","target","files","fileReader","FileReader","readAsText","onload","setState","result","this","stringify","toGeoJSON","encodeURIComponent","link","href","download","CssBaseline","Grid","container","item","xs","React","Component","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.06c57bd5.chunk.js","sourcesContent":["import React from 'react';\nimport {\n  AppBar,\n  Toolbar,\n  Typography,\n} from '@material-ui/core';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(() => ({\n  title: {\n    flexGrow: 1,\n  },\n}));\n\nconst Header = ({ appName }) => {\n  // hooks\n  const styles = useStyles();\n\n  return (\n    <>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography variant=\"h6\" className={styles.title}>\n            { appName }\n          </Typography>\n        </Toolbar>\n      </AppBar>\n    </>\n  );\n};\n\n// avoids eslint warning about props\nHeader.propTypes = {\n  appName: PropTypes.string.isRequired,\n};\n\nexport default Header;\n","import React from 'react';\nimport {\n  Map,\n  TileLayer,\n  GeoJSON,\n  LayersControl,\n  FeatureGroup,\n} from 'react-leaflet';\nimport { EditControl } from 'react-leaflet-draw';\nimport Choropleth from 'react-leaflet-choropleth';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport hash from 'object-hash';\n\n// import assets\nimport countries from '../assets/maps/countries.geo.json';\nimport densities from '../assets/maps/densities.geo.json';\nimport tokens from '../assets/access/tokens.json';\n\n// custom css\nconst useStyles = makeStyles(() => ({\n  map: {\n    height: 500,\n    width: '100%',\n  },\n}));\n\nconst Geo = ({\n  coords,\n  zoom,\n  onCreated,\n  featureOpened,\n}) => {\n  // hooks\n  const styles = useStyles();\n\n  // layer control checkboxes\n  const { BaseLayer, Overlay } = LayersControl;\n\n  // key used to reload map once new feature opened\n  return (\n    <Map\n      center={coords}\n      zoom={zoom}\n      className={styles.map}\n      key={hash(featureOpened)}\n    >\n      <LayersControl>\n        <BaseLayer checked name=\"OpenStreetMap\">\n          <TileLayer\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n            attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          />\n        </BaseLayer>\n        <BaseLayer name=\"Hillshading\">\n          <TileLayer\n            url=\"http://tiles.wmflabs.org/hillshading/{z}/{x}/{y}.png\"\n            attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          />\n        </BaseLayer>\n        {\n          tokens.mapbox !== '' && (\n            <BaseLayer name=\"Mapbox satellite\">\n              <TileLayer\n                url={`https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v11/tiles/{z}/{x}/{y}?access_token=${tokens.mapbox}`}\n                attribution='Imagery &amp;copy <a href=\"https://www.mapbox.com/\">Mapbox</a>'\n              />\n            </BaseLayer>\n          )\n        }\n\n        <Overlay name=\"Countries (green)\">\n          <GeoJSON\n            data={countries}\n            onEachFeature={(feature, layer) => {\n              layer.bindPopup(feature.properties.name);\n            }}\n            color=\"green\"\n          />\n        </Overlay>\n\n        <Overlay checked name=\"Densities (Choropleth)\">\n          <Choropleth\n            data={densities}\n            valueProperty={(feature) => feature.properties.density}\n            onEachFeature={(feature, layer) => {\n              layer.bindPopup(`${feature.properties.name}: ${feature.properties.density}`);\n            }}\n            steps={5}\n            scale={['white', 'red']}\n            mode=\"q\"\n            style={{\n              color: '#fff',\n              weight: 2,\n              fillOpacity: 0.8,\n            }}\n          />\n        </Overlay>\n\n        <Overlay checked name=\"Features drawn (blue)\">\n          <FeatureGroup>\n            <EditControl\n              onCreated={onCreated}\n            />\n          </FeatureGroup>\n        </Overlay>\n\n        {\n          featureOpened !== ''\n          && (\n            <Overlay checked name=\"Features opened (red)\">\n              <GeoJSON\n                data={JSON.parse(featureOpened)}\n                color=\"red\"\n              />\n            </Overlay>\n          )\n        }\n      </LayersControl>\n    </Map>\n  );\n};\n\n// props validation\nGeo.propTypes = {\n  coords: PropTypes.arrayOf(PropTypes.number).isRequired,\n  zoom: PropTypes.number.isRequired,\n  onCreated: PropTypes.func.isRequired,\n  featureOpened: PropTypes.string.isRequired,\n};\n\nexport default Geo;\n","import React from 'react';\nimport {\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n} from '@material-ui/core';\nimport { Save, FolderOpen } from '@material-ui/icons';\nimport PropTypes from 'prop-types';\n\nconst Nav = ({ onOpen, onSave }) => (\n  <>\n    <List component=\"nav\">\n      <ListItem button onClick={onOpen}>\n        <ListItemIcon>\n          <FolderOpen />\n        </ListItemIcon>\n        <ListItemText primary=\"Open\" />\n      </ListItem>\n      <ListItem button onClick={onSave}>\n        <ListItemIcon>\n          <Save />\n        </ListItemIcon>\n        <ListItemText primary=\"Save\" />\n      </ListItem>\n    </List>\n  </>\n);\n\n// props validation\nNav.propTypes = {\n  onOpen: PropTypes.func.isRequired,\n  onSave: PropTypes.func.isRequired,\n};\n\nexport default Nav;\n","import React from 'react';\nimport {\n  CssBaseline,\n  Grid,\n} from '@material-ui/core';\nimport {\n  Header,\n  Geo,\n  Nav,\n} from './components';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // init state\n    this.state = {\n      featureOpened: '',\n      featureDrawn: '',\n    };\n\n    // binding to use this keyword in callbacks\n    this.onCreated = this.onCreated.bind(this);\n    this.onOpen = this.onOpen.bind(this);\n    this.onSave = this.onSave.bind(this);\n  }\n\n  onOpen() {\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.click();\n    input.onchange = (e) => {\n      // read content of selected file\n      const file = e.target.files[0];\n      const fileReader = new FileReader();\n      fileReader.readAsText(file);\n      fileReader.onload = () => {\n        this.setState({\n          featureOpened: fileReader.result,\n        });\n      };\n    };\n  }\n\n  onCreated(e) {\n    // save drawn feature in state\n    this.setState({\n      featureDrawn: JSON.stringify(e.layer.toGeoJSON()),\n    });\n  }\n\n  onSave() {\n    const { featureDrawn } = this.state;\n    if (featureDrawn === '') {\n      return;\n    }\n\n    // download geojson feature drawn\n    const data = `data:text/json;charset=utf-8,${encodeURIComponent(featureDrawn)}`;\n    const link = document.createElement('a');\n    link.href = data;\n    link.download = 'feature.geo.json';\n    link.click();\n  }\n\n  render() {\n    const { featureOpened } = this.state;\n\n    return (\n      <>\n        <CssBaseline />\n        <Header appName=\"Maps\" />\n\n        <Grid container>\n          <Grid item xs={10}>\n            <Geo\n              coords={[36, -95]}\n              zoom={4}\n              onCreated={this.onCreated}\n              featureOpened={featureOpened}\n            />\n          </Grid>\n          <Grid item xs={2}>\n            <Nav\n              onOpen={this.onOpen}\n              onSave={this.onSave}\n            />\n          </Grid>\n        </Grid>\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}